"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[692],{1887:function(e,n,i){i.d(n,{Fx:function(){return h},QG:function(){return u},zk:function(){return x}});var t=i(678),r=i(8489),o=i(7133),s=i(2791),l=i(7760),a=i(5712),c=i(6253),d=i(184),u=["Remilia","Koishi","Suwako","Sakuya","Sanae","Meiling"],f=(0,s.memo)((function(e){var n=e.showBox,i=e.immune,t=e.dead;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("mesh",{visible:n,children:[(0,d.jsx)("boxGeometry",{args:[1.3,1.3,1.3]}),(0,d.jsx)("meshBasicMaterial",{color:"White"})]}),(0,d.jsxs)("mesh",{visible:!(t||!i),children:[(0,d.jsx)("sphereGeometry",{args:[1.5]}),(0,d.jsx)("meshBasicMaterial",{color:"#D87D68"})]}),(0,d.jsxs)("mesh",{visible:!!t,children:[(0,d.jsx)("boxGeometry",{args:[2.3,2.3,2.3]}),(0,d.jsx)("meshBasicMaterial",{map:(0,o.FN)()})]})]})})),m=function(e){switch(e.modelName){case"Remilia":return(0,d.jsx)(o.Fn,(0,r.Z)({},e));case"Koishi":return(0,d.jsx)(o.vg,(0,r.Z)({},e));case"Suwako":return(0,d.jsx)(o.cM,(0,r.Z)({},e));case"Sakuya":return(0,d.jsx)(o.kB,(0,r.Z)({},e));case"Sanae":return(0,d.jsx)(o.Gg,(0,r.Z)({},e));case"Meiling":return(0,d.jsx)(o.I3,(0,r.Z)({},e))}return(0,d.jsx)(o.Fn,(0,r.Z)({},e))},x=function(e){var n=(0,a.EJ)((function(){return{mass:0,type:"Kinematic",args:[1.3,1.3,1.3],collisionFilterMask:e.mask,collisionFilterGroup:e.group,onCollideBegin:e.onCollideBegin}})),i=(0,t.Z)(n,2),o=i[0],s=i[1],l=(0,c.a)().showBox;return void 0!==e.position&&s.position.set(e.position.x,e.position.y,e.position.z),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("group",{ref:o,children:(0,d.jsx)(f,{showBox:l,immune:e.immune,dead:e.dead})}),!0===e.dead?null:(0,d.jsx)(m,(0,r.Z)({},e))]})},h=function(e){var n=e.modelName,i=e.spin,r=e.scale,o=(0,s.useState)(new l.Euler(0,0,0)),a=(0,t.Z)(o,2),c=a[0],u=a[1];return(0,s.useEffect)((function(){if(i){var e=setInterval((function(){u((function(e){var n=(new l.Quaternion).setFromEuler(e),i=(new l.Quaternion).setFromAxisAngle(new l.Vector3(0,1,0),.1),t=n.multiply(i);return(new l.Euler).setFromQuaternion(t)}))}),60);return function(){clearInterval(e)}}}),[i]),(0,d.jsx)(x,{modelName:n,rotation:c,scale:r})}},213:function(e,n,i){i.d(n,{EZ:function(){return v},Wd:function(){return Z},uG:function(){return g}});var t,r,o,s=i(7186),l=i(6090),a=i(7309),c=i(6988),d=i(9995),u=i(7557),f=i(2621),m=i(2360),x=i(184),h=m.ZP.div(t||(t=(0,s.Z)(["\n  font-family: Alfa Slab One;\n  font-size: 20pt;\n  color: Black;\n  font-weight: bold;\n"]))),p=m.ZP.div(r||(r=(0,s.Z)(["\n  font-family: Alfa Slab One;\n  font-size: 15pt;\n  color: Black;\n  display: inline;\n"]))),j=m.ZP.div(o||(o=(0,s.Z)(["\n  font-family: Alfa Slab One;\n  font-size: 12pt;\n  color: Blue;\n  display: inline;\n"]))),g=function(e,n){l.Z.open({placement:"bottom",message:(0,x.jsx)(h,{children:"Invitation"}),description:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p,{children:"from ".concat(e.name,"  ")}),(0,x.jsx)(j,{children:"(".concat(e.email,") ")})]}),duration:0,style:{width:"fit-content",height:"fit-content"},key:e.name,btn:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.Z,{type:"link",size:"small",onClick:function(){return l.Z.destroy(e.name)},children:"Reject"}),(0,x.jsx)(a.Z,{type:"primary",size:"small",onClick:function(){n(),l.Z.destroy(e.name)},children:"Accept"})]})})},v=function(e){l.Z.open({placement:"bottom",message:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{display:"inline",fontSize:"20px"},children:"RoomID"}),(0,x.jsx)(a.Z,{onClick:function(){navigator.clipboard.writeText(e).then((function(){Z({type:"success",msg:"RoomID copied"})}))},style:{border:"none"},icon:(0,x.jsx)(d.Z,{style:{fontSize:"20px"}})})]}),description:(0,x.jsx)("div",{style:{backgroundColor:"rgba(0,0,0,0.1)",fontSize:"18px"},children:e}),duration:0,style:{width:"fit-content",height:"fit-content"}})},Z=function(e){if(e.msg){var n=e.type,i=e.msg;switch(n){case"success":c.ZP.success({content:i,duration:3,icon:(0,x.jsx)(u.Z,{style:{fontSize:"25px"}}),style:{fontSize:"20px"}});break;case"error":c.ZP.error({content:i,duration:3,icon:(0,x.jsx)(f.Z,{style:{fontSize:"25px"}}),style:{fontSize:"20px"}})}}}},3182:function(e,n,i){i.d(n,{FF:function(){return E},Gx:function(){return I},fA:function(){return S},gl:function(){return C},pJ:function(){return z}});var t,r,o,s,l,a=i(678),c=i(7186),d=i(1687),u=i(5571),f=i(1055),m=i(7309),x=i(2360),h=i(5872),p=i(732),j=i(7575),g=i(713),v=i(9286),Z=i(184),y=x.ZP.div(t||(t=(0,c.Z)(["\n  font-family: Alfa Slab One;\n  font-size: 1.5vw;\n  color: Black;\n  font-weight: bold;\n"]))),w=x.ZP.div(r||(r=(0,c.Z)(["\n  display: flex;\n  justify-content: center;\n"]))),k=x.ZP.div(o||(o=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n\n  gap: 10px;\n  height: 200px;\n  overflow: auto;\n"]))),b=x.ZP.div(s||(s=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n\n  gap: 10px;\n  height: 150px;\n  overflow: auto;\n"]))),F=x.ZP.div(l||(l=(0,c.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  color: Black;\n  font-size: 12pt;\n  gap: 10px;\n  img {\n    width: 30px;\n    height: 30px;\n  }\n"]))),S=function(e){var n=e.open,i=e.callback;return(0,Z.jsx)(d.Z,{open:n,title:"You need to sign in first",footer:null,closable:!1,children:(0,Z.jsx)(w,{children:(0,Z.jsx)(h.kZ,{onSuccess:i,onError:function(){return console.log("login failed")}})})})},z=function(e){var n=e.open,i=e.onJoin,t=e.onCancel,r=u.Z.useForm(),o=(0,a.Z)(r,1)[0];return(0,Z.jsx)(d.Z,{open:n,title:"Join an Existing Room",okText:"Join",cancelText:"Cancel",onCancel:t,onOk:function(){o.validateFields().then((function(e){o.resetFields(),i(e)}))},children:(0,Z.jsxs)(u.Z,{form:o,layout:"vertical",name:"form_in_modal",children:[(0,Z.jsx)(y,{children:"RoomID"}),(0,Z.jsx)(u.Z.Item,{name:"roomID",rules:[{required:!0,message:"Error: Please enter the RoomID"}],children:(0,Z.jsx)(f.Z,{})})]})})},C=function(e){var n=e.open,i=e.onSave,t=e.onCancel,r=u.Z.useForm(),o=(0,a.Z)(r,1)[0];return(0,Z.jsx)(d.Z,{open:n,okText:"Save",cancelText:"Cancel",onCancel:t,onOk:function(){o.validateFields().then((function(e){o.resetFields(),i(e)}))},children:(0,Z.jsxs)(u.Z,{form:o,layout:"vertical",name:"form_in_modal",children:[(0,Z.jsx)(y,{children:"Enter your new name"}),(0,Z.jsx)(u.Z.Item,{name:"name",rules:[{required:!0,message:"Error: Please enter your name"}],children:(0,Z.jsx)(f.Z,{})})]})})},E=function(e){var n=e.open,i=e.requests,t=e.friends,r=e.onCancel,o=e.onAddFriend,s=e.onAcceptFriend,l=e.onDeleteFriend,c=e.onDeleteRequest,x=u.Z.useForm(),h=(0,a.Z)(x,1)[0];return(0,Z.jsxs)(d.Z,{open:n,footer:null,onCancel:r,children:[(0,Z.jsx)(y,{children:"friends request"}),(0,Z.jsx)(b,{children:null===i||void 0===i?void 0:i.map((function(e,n){return(0,Z.jsxs)(F,{children:[(0,Z.jsx)("img",{src:e.picture}),(0,Z.jsx)("div",{children:e.name}),(0,Z.jsx)("div",{children:e.email}),(0,Z.jsx)(m.Z,{onClick:function(){c(e.email)},size:"small",icon:(0,Z.jsx)(p.Z,{})}),(0,Z.jsx)(m.Z,{size:"small",onClick:function(){s(e.email)},icon:(0,Z.jsx)(j.Z,{})})]},n)}))}),(0,Z.jsx)(y,{children:"your friends"}),(0,Z.jsx)(k,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,Z.jsxs)(F,{children:[(0,Z.jsx)("img",{src:e.picture}),(0,Z.jsx)("div",{children:e.name}),(0,Z.jsx)("div",{children:e.email}),(0,Z.jsx)(m.Z,{onClick:function(){l(e.email)},size:"small",icon:(0,Z.jsx)(p.Z,{})})]},n)}))}),(0,Z.jsxs)(u.Z,{form:h,layout:"vertical",name:"form_in_modal",children:[(0,Z.jsx)(y,{children:"Enter user email"}),(0,Z.jsx)(u.Z.Item,{name:"email",rules:[{required:!0,message:"Error: Please enter user email"}],children:(0,Z.jsx)(f.Z,{placeholder:"input user email",suffix:(0,Z.jsx)(m.Z,{size:"large",icon:(0,Z.jsx)(g.Z,{}),onClick:function(){h.validateFields().then((function(e){h.resetFields(),o(e)}))}})})})]})]})},I=function(e){var n=e.open,i=e.friends,t=e.onlineFriends,r=e.onInvite,o=e.onCancel,s=i.filter((function(e){return!t.some((function(n){return n.email===e.email}))}));return(0,Z.jsxs)(d.Z,{open:n,footer:null,onCancel:o,children:[(0,Z.jsx)(y,{children:"Online Friends"}),(0,Z.jsx)(k,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,Z.jsxs)(F,{children:[(0,Z.jsx)("img",{src:e.picture}),(0,Z.jsx)("div",{children:e.name}),(0,Z.jsx)("div",{children:e.email}),(0,Z.jsx)(m.Z,{onClick:function(){r(e.email)},size:"small",icon:(0,Z.jsx)(v.Z,{})})]},n)}))}),(0,Z.jsx)(y,{children:"Offline Friends"}),(0,Z.jsx)(b,{children:null===s||void 0===s?void 0:s.map((function(e,n){return(0,Z.jsxs)(F,{children:[(0,Z.jsx)("img",{src:e.picture}),(0,Z.jsx)("div",{children:e.name}),(0,Z.jsx)("div",{children:e.email})]},n)}))})]})}},6692:function(e,n,i){i.r(n),i.d(n,{default:function(){return q}});var t,r,o,s,l,a,c,d=i(678),u=i(7186),f=i(2791),m=i(348),x=i(7689),h=i(1960),p=i(2360),j=i(5712),g=i(7133),v=i(1887),Z=i(4057),y=i(8944),w=i(7106),k=i(9080),b=i(1206),F=i(939),S=i(2339),z=i(184),C=p.ZP.div(t||(t=(0,u.Z)(["\n  width: 200px;\n  height: 300px;\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  align-items: center;\n  gap: 20px;\n"]))),E=p.ZP.div(r||(r=(0,u.Z)(["\n  -webkit-border-image: url(",") 30 30 round;\n  -moz-border-image: url(",") 30 30 round;\n  -o-border-image: url(",") 30 30 round;\n  background-color: rgba(255, 255, 255, 0.35);\n  width: 100%;\n  height: 80%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  .chara {\n    width: 100%;\n    height: 70%;\n  }\n\n  .ant-tag {\n    margin: 5px;\n    padding: 5px;\n    font-size: 15pt;\n  }\n\n  position: relative;\n  .right_arrow {\n    position: absolute;\n    top: 50%;\n    left: 120%;\n    transform: translate(-50%, -50%);\n  }\n  .left_arrow {\n    position: absolute;\n    top: 50%;\n    left: -20%;\n    transform: translate(-50%, -50%);\n  }\n"])),g.Ew,g.Ew,g.Ew),I=p.ZP.div(o||(o=(0,u.Z)(["\n  -webkit-border-image: url(",") 30 30 round;\n  -moz-border-image: url(",") 30 30 round;\n  -o-border-image: url(",") 30 30 round;\n  background-color: rgba(255, 255, 255, 0.6);\n  width: 100%;\n  height: 20%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .name {\n    font-size: 15pt;\n  }\n"])),g.c$,g.c$,g.c$),P=(0,f.forwardRef)((function(e,n){var i=e.name,t=e.state,r=e.showArrow,o=e.isLeader,s="",l=null;switch(t){case"choosing":s="processing",l=(0,z.jsx)(Z.Z,{spin:!0});break;case"ready":s="green",l=(0,z.jsx)(y.Z,{});break;case"waiting":s="purple",l=(0,z.jsx)(w.Z,{})}return(0,z.jsxs)(C,{children:[(0,z.jsxs)(I,{children:[o?(0,z.jsx)(k.Z,{style:{color:"Yellow",fontSize:"25px"}}):null,(0,z.jsx)("div",{className:"name",children:i})]}),(0,z.jsxs)(E,{children:[(0,z.jsx)("div",{ref:n,className:"chara"}),(0,z.jsx)(S.Z,{color:s,icon:l,children:t}),1==r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(b.Z,{className:"left_arrow",style:{fontSize:"40px"}}),(0,z.jsx)(F.Z,{className:"right_arrow",style:{fontSize:"40px"}})]}):null]})]})})),R=i(2569),N=i(6710),A=i(6253),G=i(213),D=i(5673),B=i(3182),_={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left",KeyZ:"select"},L=p.ZP.div(s||(s=(0,u.Z)(["\n  background-image: url(",");\n  background-repeat: no-repeat;\n  width: 1200px;\n  height: 675px;\n  position: relative;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  .canvas {\n    position: fixed !important;\n    top: 0px;\n    left: 0px;\n  }\n"])),g.F8),O=p.ZP.div(l||(l=(0,u.Z)(["\n  width: 25%;\n  height: 60%;\n  display: flex;\n"]))),M=p.ZP.div(a||(a=(0,u.Z)(["\n  width: 75%;\n  height: 100%;\n"]))),Q=p.ZP.div(c||(c=(0,u.Z)(["\n  width: 100%;\n  height: 50%;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  gap: 20px;\n"]))),q=function(){var e=(0,f.useState)(4),n=(0,d.Z)(e,2),i=n[0],t=n[1],r=(0,R.v)(_),o=(0,f.useState)(!1),s=(0,d.Z)(o,2),l=s[0],a=s[1],c=(0,f.useState)(0),u=(0,d.Z)(c,2),p=u[0],g=u[1],Z=(0,f.useState)("choosing"),y=(0,d.Z)(Z,2),w=y[0],k=y[1],b=(0,f.useState)(),F=(0,d.Z)(b,2),S=F[0],C=F[1],E=(0,f.useState)(),I=(0,d.Z)(E,2),q=I[0],J=I[1],T=(0,f.useState)([]),K=(0,d.Z)(T,2),W=K[0],$=K[1],Y=(0,f.useState)([]),U=(0,d.Z)(Y,2),V=U[0],X=U[1],H=(0,A.a)(),ee=H.google,ne=H.location,ie=H.roomID,te=H.playerID,re=H.setLocation,oe=H.setModelName,se=H.setIsLeader,le=(0,D.L)(),ae=le.message,ce=le.playerList,de=le.roomState,ue=le.leaveRoom,fe=le.inviteFriend,me=le.startGame,xe=le.updatePlayer,he=le.openFriendSystem,pe=(0,x.s0)(),je=(0,f.useRef)(),ge=(0,f.useRef)(),ve=(0,f.useRef)(),Ze=(0,f.useRef)(),ye=(0,f.useRef)(),we=(0,f.useRef)([ve,Ze,ye]);return(0,f.useEffect)((function(){"game"===ne?pe("/game",{replace:!0}):"room"===ne?pe("/room",{replace:!0}):"home"===ne&&pe("/",{replace:!0})}),[ne]),(0,f.useEffect)((function(){if(ce){var e=null===ce||void 0===ce?void 0:ce.filter((function(e){return e.playerID===te}))[0],n=null===ce||void 0===ce?void 0:ce.filter((function(e){return e.playerID!==te}));if((null===n||void 0===n?void 0:n.length)<3)for(var i=3-n.length,t=1;t<=i;t++)n.push({state:"waiting"});C(e),J(n),oe(null===e||void 0===e?void 0:e.modelName),se(!0===e.isLeader)}}),[ce]),(0,f.useEffect)((function(){"playing"===de&&re("game")}),[de]),(0,f.useEffect)((function(){var e=i;if(r.up&&(e=i-1),r.down&&(e=i+1),e>=5&&(e=0),e<=-1&&(e+=5),t(e),4===e){var n=p;r.right&&n++,r.left&&n--,n>=v.QG.length&&(n=0),n<=-1&&(n=v.QG.length-1),g(n),k("choosing")}if(r.select)switch(i){case 0:me(ie);break;case 1:ue(ie,te),re("home");break;case 2:he(ee.email),a(!0);break;case 3:(0,G.EZ)(ie);break;case 4:k("ready"),t(0)}}),[r]),(0,f.useEffect)((function(){xe(ie,te,{modelName:v.QG[p],state:w})}),[p,w]),(0,f.useEffect)((function(){if((0,G.Wd)(ae),"success"===ae.type)switch(ae.event){case"Start_Game":re("game");break;case"Open_FriendSystem":X(ae.onlineFriends),$(ae.friends)}}),[ae]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(B.Gx,{open:l,friends:W,onInvite:function(e){fe(te,e,ie)},onlineFriends:V,onCancel:function(){return a(!1)}}),(0,z.jsxs)(L,{ref:je,children:[(0,z.jsxs)(M,{children:[(0,z.jsx)(Q,{children:(0,z.jsx)(P,{ref:ge,name:null===S||void 0===S?void 0:S.name,state:null===S||void 0===S?void 0:S.state,isLeader:null===S||void 0===S?void 0:S.isLeader,showArrow:4===i})}),(0,z.jsx)(Q,{children:null===q||void 0===q?void 0:q.map((function(e,n){return(0,z.jsx)(P,{ref:we.current[n],name:e.name,state:e.state,modelName:e.modelName,isLeader:e.isLeader},n)}))})]}),(0,z.jsx)(m.Xz,{eventSource:je,className:"canvas",children:(0,z.jsxs)(j.wI,{children:[(0,z.jsx)(h.G,{track:ge,children:(0,z.jsx)(v.Fx,{spin:"choosing"===(null===S||void 0===S?void 0:S.state),modelName:null===S||void 0===S?void 0:S.modelName,scale:.23})}),null===q||void 0===q?void 0:q.map((function(e,n){return"waiting"!==e.state?(0,z.jsx)(h.G,{track:we.current[n],children:(0,z.jsx)(v.Fx,{spin:"choosing"===e.state,modelName:e.modelName,scale:.23})},n):null}))]})}),(0,z.jsx)(O,{children:(0,z.jsx)(N.a,{options:["Start","Quit","Invite","RoomID"],selection:i})})]})]})}}}]);
//# sourceMappingURL=692.d83537d4.chunk.js.map